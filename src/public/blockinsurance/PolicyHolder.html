<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="Form2.css" />
    <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
    <!-- <script type="text/javascript" src="jso.js"></script> -->
</head>

<body>


    <header><img src="ains.png" /></header>
    <section>
        <p>Please fill up the following form:-</p>
        <form id="Policy_holder_form" class="contact-form">
            <table class="table_form">
                <!--Policy holder details section-->
                <tr>
                    <td colspan="2">
                        <strong>Policy holder details</strong>
                    </td>
                </tr>
                <tr>
                    <td><label for="policyholder_name">Name</label></td>
                    <td><input id="policyholder_name" name="policyholder_name" type="text" /></td>
                </tr>
                <tr>
                    <td><label for="policyholder_email">Email Address</label></td>
                    <td><input id="policyholder_email" name="policyholder_email" type="email" /></td>
                </tr>
                <!-- <tr>
                    <td><label for="policyholder_address">Address</label></td>
                    <td><textarea id="policyholder_address" name="policyholder_address" rows="2" cols="65"></textarea></td>
                </tr> -->
                <!-- <tr>
                    <td><label for="policyholder_telepolicyholderone">Telephone</label></td>
                    <td><input id="policyholder_telephone" name="policyholder_telephone"  type="tel" maxlength="10" placeholder="123-456-7890" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"/></td>
                </tr> -->
                <tr>
                    <td><label for="policyholder_insurance_company">Insurance company name</label></td>
                    <td><input id="policyholder_insurance_company" name="policyholder_insurance_company" type="text" /></td>
                </tr>
                <tr>
                    <td><label for="policyholder_policy_no">Policy no.</label></td>
                    <td><input id="policyholder_policy_no" name="policyholder_policy_no" type="text" /></td>
                </tr>
                <tr>
                    <td><label for="policyholder_country">Country</label></td>
                    <td><select name="policyholder_country" id="policyholder_country">
                                <option value="">--Select your country--</option>
                                <option value="BE">Belgium</option>
                                <option value="HR">Croatia</option>
                                <option value="CZ">Czech Republic</option>
                                <option value="EG">Egypt</option>
                                <option value="FR">France</option>
                                <option value="DE">Germany</option>
                                </select></td>
                </tr>
                <!--Other party details section-->
                <tr>
                    <td colspan="2">
                        <strong>Other party details</strong>
                    </td>
                </tr>
                <tr>
                    <td><label for="otherperson_name">Name</label></td>
                    <td><input id="otherperson_name" name="otherperson_name" type="text" /></td>
                </tr>
                <tr>
                    <td><label for="otherperson_email">Email Address</label></td>
                    <td><input id="otherperson_email" name="otherperson_email" type="email" /></td>
                </tr>
                <!-- <tr>
                        <td><label for="otherperson_address">Address</label></td>
                        <td><textarea id="otherperson_address" name="otherperson_address" rows="2" cols="65"></textarea></td>
                    </tr> -->
                <!-- <tr>
                        <td><label for="otherperson_teleotherpersonone">Teleopone</label></td>
                        <td><input id="op_teleopone" name="op_teleopone" type="text" /></td>
                    </tr> -->
                <tr>
                    <td><label for="otherperson_insurance_company">Insurance company name</label></td>
                    <td><input id="otherperson_insurance_company" name="otherperson_insurance_company" type="text" /></td>
                </tr>
                <tr>
                    <td><label for="otherperson_policy_no">Policy no.</label></td>
                    <td><input id="otherperson_policy_no" name="otherperson_policy_no" type="text" /></td>
                </tr>
                <tr>
                    <td><label for="otherperson_country">Country</label></td>
                    <td><select name="otherperson_country" id="otherperson_country">
                                    <option value="">--Select your country--</option>
                                    <option value="Belgium">Belgium</option>
                                    <option value="Croatia">Croatia</option>
                                    <option value="Czech Republic">Czech Republic</option>
                                    <option value="Egypt">Egypt</option>
                                    <option value="France">France</option>
                                    <option value="Germany">Germany</option>
                                    </select></td>
                </tr>
                <!--Accident details section-->
                <tr>
                    <td colspan="2">
                        <strong>Accident Details</strong>
                    </td>
                </tr>
                <tr>
                    <td><label for="Accident_time">Date/time:</label></td>
                    <td><input type="datetime-local" id="Accident_time" name="party-time" value="" min="2016-01-01T00:00" max="2018-06-14T00:00" />
                    </td>
                </tr>
                <tr>
                    <td><label for="place">Place</label></td>
                    <td><input id="place" name="place" type="text" /></td>
                </tr>
                <tr>
                    <td><label for="accident_country">Country</label></td>
                    <td><select name="accident_country" id="accident_country">
                            <option value="">--Select accident location--</option>
                            <option value="Belgium">Belgium</option>
                            <option value="Croatia">Croatia</option>
                            <option value="Czech Republic">Czech Republic</option>
                            <option value="Egypt">Egypt</option>
                            <option value="France">France</option>
                            <option value="Germany">Germany</option>
                            </select></td>
                </tr>
                <tr>
                    <td><label>Reporting authority involved</label></td>
                    <td> <input type="radio" name="reporting_authority" value="yes"> Yes &nbsp;
                        <input type="radio" name="reporting_authority" value="no"> No</td>
                </tr>
                <tr>
                    <td><label for="injury">Injury</label></td>
                    <td> <input type="radio" name="injury" value="yes"> Yes &nbsp;
                        <input type="radio" name="injury" value="no"> No</td>
                </tr>
                <tr>
                    <td><label for="material_damage">Material damage</label></td>
                    <td> <input type="radio" name="material_damage" value="yes"> Yes &nbsp;
                        <input type="radio" name="material_damage" value="no"> No</td>
                </tr>
                <!--Witness details section-->
                <tr>
                    <td colspan="2">
                        <strong>Witness Details</strong>
                    </td>
                </tr>
                <tr>
                    <td><label for="witness_name">Name</label></td>
                    <td><input id="witness_name" name="witness_name" type="text" /></td>
                </tr>
                <!-- <tr class="contact-form__input-group">
                    <td><label class="contact-form__label" for="email">Email Address</label></td>
                    <td><input class="contact-form__input contact-form__input--email" id="email" name="email" type="email" /></td>
                </tr> -->
                <!-- <tr>
                    <td><label for="witness_address">Address</label></td>
                    <td><textarea id="witness_address" name="witness_address" rows="2" cols="65"></textarea></td>
                </tr> -->
                <tr>
                    <td><label for="witness_telephone">Telephone</label></td>
                    <td><input id="witness_telephone" name="witness_telephone" type="tel" maxlength="10" placeholder="123-456-7890" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" /></td>
                </tr>
                <!--Vehicle details section-->
                <tr>
                    <td colspan="2">
                        <strong>Vehicle Details</strong>
                    </td>
                </tr>
                <tr>
                    <td><label for="vehicle_type">Type</label></td>
                    <td><input id="vehicle_type" name="vehicle_type" type="text" /></td>
                </tr>
                <tr>
                    <td><label for="vehicle_reg_no">Registration no.</label></td>
                    <td><input id="vehicle_reg_no" name="vehicle_reg_no" type="text" /></td>
                </tr>
                <tr>
                    <td><label for="vehicle_regcountry">Country of registration</label></td>
                    <td><select name="vehicle_regcountry" id="vehicle_regcountry">
                            <option value="">--Select accident location--</option>
                            <option value="Belgium">Belgium</option>
                            <option value="Croatia">Croatia</option>
                            <option value="Czech Republic">Czech Republic</option>
                            <option value="Egypt">Egypt</option>
                            <option value="France">France</option>
                            <option value="Germany">Germany</option>
                            </select></td>
                </tr>
                <!--Remarks section-->
                <tr>
                    <td colspan="2">
                        <strong>Remarks</strong>
                    </td>
                </tr>
                <tr>
                    <td><label for="policy_holder_remarks">Remarks</label></td>
                    <td><textarea id="policy_holder_remarks" name="policy_holder_remarks" rows="5" cols="50" maxlength="150" placeholder="Maximum 150 characters"></textarea></td>
                </tr>
                <tr>
                    <td><label for="responsible_party">Responsible party according to you ?</label></td>
                    <td> <input type="radio" name="responsible_party" value="yes"> Myself &nbsp;
                        <input type="radio" name="responsible_party" value="no"> Other party</td>
                </tr>


            </table>
            <input name="secret" type="hidden" value="1b3a9374-1a8e-434e-90ab-21aa7b9b80e7" />
            <button id="submit" class="contact-form__button" type="submit">Submit</button>

        </form>
    </section>
    <div class="results">
        <h2 class="results__heading">Form Data</h2>
        <pre class="results__display-wrapper"><code class="results__display"></code></pre>
    </div>
    <!-- <table class="results">
        <h2 class="results__heading">Form Data</h2>
        <pre class="results__display-wrapper"><code class="results__display"></code></pre>
    </table> -->


</body>
<script>
    $("#submit").click(function() {
        var data = html2json();
        alert(data);
        // storeUserDataInSession(data);
        // window.location = 'slider.html';  
    });

    function html2json() {
        var key = ['Terms', 'Definitions'];
        var c = 0;
        var json = '{"UserData":[';
        var otArr = [];
        var tbl2 = $('#Policy_holder_form tr').each(function(i) {
            x = $(this).find('.input');
            var itArr = [];
            x.each(function() {
                itArr.push('"' + key[c] + '":' + '"' + $(this).text().trim() + '"');
                c++;
            });
            y.each(function() {
                itArr.push('"' + key[c] + '":' + '"' + $(this).attr('src') + '"');
            });
            otArr.push('{' + itArr.join(',') + '}');
            c = 0;
        })
        json += otArr.join(",") + ']}';
        return json;
    }
    // $("#submit").click(function() {
    //     var formData = JSON.stringify($("#Policy_holder_form"));
    //     alert(formData);
    // });
    // $("#submit").click(function() {
    //     var buttonValue = {};

    //     $("input").each(function($i) {
    //         var name = $(this).attr('name')
    //         if ($(this).val()) {
    //             buttonValue[name] = $(this).val();
    //         }

    //         var e = document.getElementById("accident_country");
    //         var strCountry = e.options[e.selectedIndex].value;
    //         buttonValue['accident_country'] = strCountry
    //     });

    //     alert(JSON.stringify(buttonValue));

    //     var fs = require('fs');
    //     fs.writeFile("thing.json", JSON.stringify(buttonValue));

    //     alert(thing.json);

    // });

    // function getAttrs(DOMelement) {
    //     var obj = {};
    //     $.each(DOMelement.attributes, function() {
    //         if (this.specified) {
    //             obj[this.name] = this.value;
    //         }
    //     });
    //     return obj;
    // }

    // $("form").each(function() {
    //     var json = {
    //         "form": []
    //     };
    //     $(this).find("input").each(function() {
    //         json.form.push(getAttrs(this));
    //     });

    //     $(this).find("select").each(function() {
    //         var select = getAttrs(this);
    //         select["type"] = "select";
    //         var options = [];
    //         $(this).children().each(function() {
    //             options.push(getAttrs(this));
    //         });
    //         select["options"] = options;
    //         json.form.push(select);
    //     });
    //     console.log(json);
    // });
</script>

</html>